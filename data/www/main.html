<!DOCTYPE html>
<html style="height:100%">
  <head>
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>Domoticae</title>
    <link rel="stylesheet" type="text/css" href="css.css" media="screen" />
    <script>
      function inicializa(){
        var xh = new XMLHttpRequest();
        xh.onreadystatechange = function(){
          if (xh.readyState == 4){
            if(xh.status == 200) {
              console.log("JSON: " + JSON)
              var res = JSON.parse(xh.responseText);
              //nombre
              console.log("Nombre: "+res.nombre);
              document.getElementById("nombreDispositivo").innerText=res.nombre;
              //consigna
              console.log("Version: "+res.version);
              document.getElementById("version").innerText=res.version;
            }
          }
        };
        xh.open("GET", "/nombre", true);
        xh.send(null);        
        
        //cargo el iframe con al info inicial
        var c=document.getElementById("iframe_a");
        console.log(c.getAttribute("src"));
        c.setAttribute("src","/root");
      }

      function cambiaIFrame(pagina){
        //cargo el iframe con la pagina indicada
        var c=document.getElementById("iframe_a");
        console.log(c.getAttribute("src"));
        c.setAttribute("src",pagina);
      }
    </script>
  </head>

  <body style="height:98%;" onload="inicializa();">
    <table style="height:100%;width:100%;color:white;border-spacing: 0px;border-collapse: collapse;border:=0;" cellpadding="10">
      <tr style="height:5%;background-color:black">
        <th align="left">
          <span style="font-family:verdana;font-size:30px;color:white">DOMOTI</span><span style="font-family:verdana;font-size:30px;color:red">C</span><span style="font-family:verdana;font-size:30px;color:white">AE</span>
          <span style="font-family:verdana;font-size:30px;color:white"> - </span>
          <span id="nombreDispositivo" style="font-family:verdana;font-size:30px;color:white"></span>
        </th>
      </tr>

      <tr style="height:5%">
        <td  >
          <table class="tabla">
            <tr class="modo1">
              <td onMouseOver="this.style.cursor='pointer'" onClick="cambiaIFrame('/estado')">Inicio</td>
              <td onMouseOver="this.style.cursor='pointer'" onClick="cambiaIFrame('/configHabitaciones')">Estado</td>
              <td onMouseOver="this.style.cursor='pointer'" onClick="cambiaIFrame('/consignaTemperatura')">Consignas</td>
              <td onMouseOver="this.style.cursor='pointer'" onClick="cambiaIFrame('/listaFicheros')">Ficheros</a></td>
              <td onMouseOver="this.style.cursor='pointer'" onClick="cambiaIFrame('/info')">Info</a></td>
              <td onMouseOver="this.style.cursor='pointer'" onClick="cambiaIFrame('/restart')">Reiniciar</a></td>
            </tr>
          </table>
        </td>
      </tr>

      <tr style="height:90%;border:none;">
        <td style="background-color:white;color:black;font-family:verdana;font-size:40;text-align:left;vertical-align:top;padding:0;">
          <!--<iframe id="iframe_a" name="iframe_a" height="800" width="1400" style="border:none;"></iframe>-->
          <iframe id="iframe_a" name="iframe_a" style="height:100%;width:100%;border:none;"></iframe>
        </td>
      </tr>
      <TR style="height:4%;">
      <TD style="color:white; background-color:black"><div><p align="left" id="version"></p><p align="right"><a href="https://domoticae.lopeztola.com" target="_self" style="text-decoration:none; color:white;">domoticae-2020</a></p></div></TD>
      </TR>
    </table>
  </body>
</html>
